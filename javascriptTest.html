<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>masadaruma!!!!</title>
</head>

<body>
    <canvas id="myCanvas" width="1000" height="500"></canvas>
    <script>
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        var SBGx = 0, SBGy = 0;//グリッドそれぞれのx,y座標
        var ResetEnableFlag = false;//リセットボタンが利用可能かどうか
        var G = false, H = false, I = false, J = false;
        /* normalblock(100,100,100,"BaseBlock",1,1,1,1);
        normalblock(100,210,100,"SSBlock",0,1,1);
        normalblock(100,320,100,"BBlock"); */
        function normalblock(x, y, size, G, H, I, J) {
            let blockname = document.getElementById("blockname");
            ctx.beginPath();
            ctx.rect(x, y, size, size);
            ctx.strokeStyle = "rgba(0, 0, 255, 0.5)";
            ctx.stroke();
            /* ctx.closePath();
            ctx.beginPath(); */
            ctx.fillStyle = "black";
            ctx.font = "20px Arial";
            ctx.textAlign = "center";
            ctx.textBaseLine = "middle";
            ctx.fillText(blockname.value, x + size * 0.5, y + size * 0.5);
            ctx.closePath();
            if (G) {
                connectionHorizontal(x - size - 10, y, size);
            }
            if (H) {
                connectionVertical(x, y, size);
            }
            if (I) {
                connectionHorizontal(x, y, size);
            }
            if (J) {
                connectionVertical(x, y - size - 10, size);
            }
        }
        function connectionVertical(x, y, size) {
            ctx.beginPath();
            ctx.rect(x + size / 2 - 10, y + size, 20, 10);
            ctx.fillStyle = "#FF0000";
            ctx.fill();
            ctx.closePath();
        }
        function connectionHorizontal(x, y, size) {
            ctx.beginPath();
            ctx.rect(x + size, y + size / 2 - 10, 10, 20);
            ctx.fillStyle = "#FF0000";
            ctx.fill();
            ctx.closePath();
        }
        function newBlock(x, y, G, H, I, J) {
            normalblock(x, y, 100,  G, H, I, J);
            SBGx = x;
            SBGy = y;
        }
        function addBlock(direction,  G, H, I, J) {
            if (direction == "up") {
                SBGy -= 110;
                normalblock(SBGx, SBGy, 100, G, H, I, J);
            }
            if (direction == "down") {
                SBGy += 110;
                normalblock(SBGx, SBGy, 100, G, H, I, J);
            }
            if (direction == "left") {
                SBGx -= 110;
                normalblock(SBGx, SBGy, 100, G, H, I, J);
            }
            if (direction == "right") {
                SBGx += 110;
                normalblock(SBGx, SBGy, 100, G, H, I, J);
            }
            if (direction == "nomove") {
                normalblock(SBGx, SBGy, 100, G, H, I, J);
            }
        }
        function moveCursor(xdirection, ydirection) {
            SBGx = SBGx + xdirection * 110;
            SBGy = SBGy + ydirection * 110;
        }
        function OnResetButtonClicked() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        function OnNewButtonClicked() {
            newBlock(300, 200, G, H, I, J);
        }
        function OnUpButtonClicked() {
            addBlock("up",  G, H, I, J);
        }
        function OnDownButtonClicked() {
            addBlock("down",  G, H, I, J);
        }
        function OnLeftButtonClicked() {
            addBlock("left",  G, H, I, J);
        }
        function OnRightButtonClicked() {
            addBlock("right",  G, H, I, J);
        }
    </script>
    <input type="button" value="new" onclick="OnNewButtonClicked()">
    <input type="button" value="reset" onclick="OnResetButtonClicked()">
    <input type="button" value="up" onclick="OnUpButtonClicked()">
    <input type="button" value="down" onclick="OnDownButtonClicked()">
    <input type="button" value="left" onclick="OnLeftButtonClicked()">
    <input type="button" value="right" onclick="OnRightButtonClicked()">
    <input type="checkbox" id="G" onclick="G=!G">G
    <input type="checkbox" id="H" onclick="H=!H">H
    <input type="checkbox" id="I" onclick="I=!I">I
    <input type="checkbox" id="J" onclick="J=!J">J
    <p></p>
    <label for="name">Blockname (8 characters Max)</label>
    <input type="text" id="blockname" name="blockname" maxlength="8" size="10" value="">
</body>

</html>
<!-- 
     J
    G I
     H
 -->